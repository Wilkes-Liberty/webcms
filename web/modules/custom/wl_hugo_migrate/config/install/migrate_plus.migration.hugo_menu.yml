id: hugo_menu
label: 'Hugo Main menu'
migration_group: hugo
status: true
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls:
    - modules/custom/wl_hugo_migrate/data/menu.json
  item_selector: /items
  fields:
  - name: uuid
    selector: uuid
  - name: title
    selector: title
  - name: url
    selector: url
  - name: weight
    selector: weight
  - name: parent_uuid
    selector: parent_uuid
ids:
  uuid:
    type: string
process:
  uuid: uuid
  title: title
  menu_name:
    plugin: default_value
    default_value: main
  weight_override:
    plugin: skip_on_empty
    method: process
    source: weight
  weight_final:
    plugin: coalesce
    source:
      - '@weight_override'
      - 0
  weight: '@weight_final'
  link/uri:
    plugin: concat
    source:
      - 'internal:'
      - url
    delimiter: ''
  link/title: title
  enabled:
    plugin: default_value
    default_value: 1
  parent:
    - plugin: skip_on_empty
      method: process
      source: parent_uuid
    - plugin: concat
      delimiter: ''
      source:
        - 'menu_link_content:'
        - '@parent_uuid'
destination:
  plugin: 'entity:menu_link_content'
migration_dependencies:
  required:
    - hugo_terms
    - hugo_pages
